//sync with command -> npx prisma migrate dev --name init


generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = "postgresql://postgres:DV+DcW_43rp9ZhT@db.jzzgtemqjibvyjdjjxdb.supabase.co:5432/postgres"
}

// used to test database connection
model TestPing {
  id        String   @id @default(uuid()) @db.Uuid
  createdAt DateTime @default(now())
}

//house info within cluster - customers only
model House {
  id        String @id @default(uuid()) @db.Uuid
  address   String @default("Unknown Address")
  latitude  Float  @default(0.0)
  longitude Float  @default(0.0)
  status   String @default("Not Visited")
  clusterId String @default("unknown")
}

//mock house info for clustering engine testing
model MockHouse {
  id        String @id @default(uuid()) @db.Uuid //unique house identifier
  address   String @default("Unknown Address") //full address string
  latitude  Float  @default(0.0) //geo coordinate
  longitude Float  @default(0.0) //geo coordinate
  neighborhood String @default("Unknown Neighborhood") //optional grouping
  priorityScore Float @default(0.0) //weighting for testing
  visitDurationMinutes Int @default(0) //time visited in minutes
  status  String @default("ACTIVE") //ACTIVE, SKIIPPED, INVALID
  isCornerHouse Boolean @default(false) // for advanced route testing
  streetName String @default("Unknown Street") //street for clustering
  houseNumber Int @default(0) //house number for clustering
  createdAt DateTime @default(now()) //timestamp
}


//generated paths to houses within clusters
model Route {
  id       String @id @default(uuid()) @db.Uuid
  clusterId String @default("unknown")
  orderedHouseIds String[] @default([])
}

//generated group of routes and houses for reps (cluster)
model Cluster {
  id       String @id @default(uuid()) @db.Uuid
  centriodLat Float  @default(0.0)
  centriodLong Float  @default(0.0)
  routeIds String[] @default([])
}